/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.brief=e()}(this,function(){"use strict";var t=document,e=Element,n=Array,r={},i={},o={},s=n.prototype,l=e.prototype,a=s.slice,c=s.forEach,h=s.map,u=s.splice,f=s.push,p=s.filter,d=l.matchesSelector||l.msMatchesSelector||l.mozMatchesSelector||l.webkitMatchesSelector||l.oMatchesSelector,g=/^#[\w\d]+$/,m=/^\.[\w\d]+$/,y=/^[\w\d]+$/,v=function(t,e){return d.call(t,e)},w=function(t){return Object.prototype.toString.call(t).replace(/^\[\w*\s|\]/g,"")},E=function(t){return t&&"object"==typeof t&&"setInterval"in t},b=function(t){return t&&/^html.*element/i.test(w(t))},A=function(t){return t&&/^htmldocument/i.test(w(t))},S=function(t){var e=B();return"String"==w(t)&&(t=B(t)),e.add(!t.isBrief&&t.length?t:t),e},T=function(t,e){var n,r,s,l=e.parentNode||window,a=o[t.type],c=i[t.type];if(e!==window)for(;void 0!==l&&!t.propagationStopped;){if(n=a.indexOf(l),e!==l&&-1!==n)for(r=c[n],s=0;s<r.length;s++)r[s].call(l,t);l=null!==l.parentNode?l.parentNode:window}},x=function(t,e){e!==!1&&t.stack.push(t.toArray())},O=function(e,n){var i,o,s,l,a=new B.Event(e),c=r[a.type];if(n!==t)for(i=0;i<c.length;i++)for(n=a.target,o=c[i],s=o.element,l=o.delegatedTo;n!==t;)v(n,l)&&(s===window||s.contains(n)&&!a.propagationStopped)&&o.callback.call(n,a),n=n.parentNode},k=function(t,e){var n,r,s=new B.Event(t,e),l=o[s.type],a=i[s.type],c=l.indexOf(s.target);for(e=s.target;-1===c&&!s.isArtificial&&(e=e.parentNode?e.parentNode:window,c=l.indexOf(e),e!==window||-1!==c););if(-1!==c){for(r=a[c],n=0;n<r.length;n++)r[n].call(e,s);return void(s.propagationStopped||T(s,e))}},B=function(t,e){return new B.prototype.create(t,e)},N=function(){u.apply(this,arguments)},j=function(t){var e,n,r=a.call(arguments,t!==!1?0:1);for(x(this,t),n=0;n<r.length;n++)e=r[n],e.isBrief?f.apply(this,e.toArray()):"Array"==w(e)?f.apply(this,e):f.call(this,e);return this},P=function(t){var e=a.call(arguments,t!==!1?0:1);return x(this,t),void 0==e[0]&&(e[0]=this.length-1),void 0==e[1]&&(e[1]=1),this.splice(e[0],e[1]),this},L=function(){return 0===this.stack.length?this:this.empty(!1).add(!1,this.stack.pop())},M=function(){return a.call(this,0)},C=function(t){for(;this.length>0;)this.remove(t);return this},D=function(t,e){var n,r;return x(this,e),"String"==w(t)&&(r=t,t=function(t){return v(t,r)}),n=p.call(this.toArray(),t),this.empty(!1).add(!1,n),this.selector=r||this.selector,this},F=function(t){var e;for(e=0;e<this.length;e++)if(v(this[e],t))return e;return-1},$=function(t){if("Number"!=w(t))throw new TypeError("`index` must be a number");return this[t]},q=function(t,e){var n,r=[];if("String"!=w(t))throw new TypeError("selector must be a string");for(x(this,e),n=0;n<this.length;n++)f.apply(r,a.call(this.get(n).querySelectorAll(t),0));return this.empty(!1).add(!1,r),this.selector=t,this},I=function(t){var e,n=[];for(x(this,t),e=0;e<this.length;e++)f.apply(n,this[e].children);return this.empty(!1).add(!1,n),this},z=function(t){if("Function"!=w(t))throw new TypeError("callback must be a function");return c.call(this,t),this},R=function(t){return h.call(this,t)},G=function(){return this.length&&null!=this[0]?this.map(function(t){var e=t.getBoundingClientRect();return{top:e.top,left:e.left}}):null},H=function(t){return this.map(function(e){return e.getAttribute(t)})},J=function(t,e){return this.forEach(function(n){e===!1?n.removeAttribute(t):n.setAttribute(t,e)})},K=function(e,n,s,l){var a,c,h=n,u=this;if("String"!=w(e))throw new TypeError("type must be a string");if("Function"!=w(n))throw new TypeError("callback must be a function");for("Boolaen"==w(s)&&(l=s,s=void 0),!s&&l&&(h=function(t){u.off(e,h),n.call(this,t)}),c=0;c<u.length;c++)a=u[c],s?(r[e]||(r[e]=[],t.addEventListener(e,O,!0)),r[e].push({element:a,delegatedTo:s,callback:n})):(o[e]||(o[e]=[],i[e]=[],t.addEventListener(e,k,!0)),-1===o[e].indexOf(a)&&(o[e].push(a),i[e].push([])),i[e][o[e].indexOf(a)].push(h));return this},Q=function(t,e,n,r){var i;for(i=0;i<t.length;i++)this.on(t[i],e,n,r);return this},U=function(e,n,s){var l,a,c,h,u,f,p,d,g,m=this;for(d=0;d<m.length;d++)if(a=m[d],s){for(h=r[e],c=h.length;c--;)f=h[c],f.element===a&&f.delegatedTo===s&&f.callback===n&&h.splice(c,1);h.length||t.removeEventListener(e,O,!0)}else{for(h=i[e],l=o[e],p=l.indexOf(a),u=h[p],g=0;g<u.length;g++)u[g]===n&&u.splice(g,1);0===u.length&&(l.splice(p,1),h.splice(p,1)),0===l.length&&t.removeEventListener(e,k,!0)}return this},V=function(t,e,n){var r;for(r=0;r<t.length;r++)this.off(t[r],e,n);return this},W=function(){var t=a.call(arguments,0);return t.push(!0),B.prototype.on.apply(this,t)},X=function(){var t=a.call(arguments,0);return t.push(!0),B.prototype.onAll.apply(this,t)},Y=function(t){return this.forEach(function(e){i[t]&&i[t].length>0&&k(t,e)}),this},Z=function(e,n){var r;return(e||n)&&(("String"==w(n)||void 0==n&&"String"==w(e))&&(this.selector=n||e,r=g.test(this.selector)?[t.getElementById(this.selector.substring(1))]:m.test(this.selector)?t.getElementsByClassName(this.selector.substring(1)):y.test(this.selector)?t.getElementsByTagName(this.selector):t.querySelectorAll(this.selector),r.length&&null!=r[0]&&this.add(!1,a.call(r,0))),b(n)||A(n)?(this.add(!1,n),this.find(e,!1)):b(e)||A(e)||E(e)?this.add(!1,e):this.selector===n?this.find(e,!1):n&&n.isBrief&&this.add(!1,n.find(e))),this},_=function(){var t,e,n,r,i,o,s,l,a,c=arguments[0]||{},h=1,u=arguments.length,f=!1;for("boolean"==typeof c&&(f=c,c=arguments[1]||{},s=w(c),h=2),"object"!=typeof c&&"Function"!==s&&(c={});u>h;h++)if(t=arguments[h],null!=t){"string"==typeof t&&(t=t.split(""));for(e in t)n=c[e],l=w(n),r=t[e],a=w(r),c!==r&&(f&&r&&("Object"===a||(i="Array"===a))?(i?(i=!1,o=n&&"Array"===l?n:[]):o=n&&"Object"===l?n:{},c[e]=B.extend(f,o,r)):"undefined"!=typeof r&&(c[e]=r))}return c},te=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault()},ee=function(){this.propagationStopped=!0,this.originalEvent.stopPropagation()};return B.prototype={length:0,isBrief:!0,stack:[],splice:N,add:j,remove:P,revert:L,toArray:M,empty:C,filter:D,indexOf:F,get:$,find:q,getChildren:I,forEach:z,map:R,getOffsets:G,getAttr:H,setAttr:J,on:K,onAll:Q,off:U,offAll:V,once:W,onceAll:X,trigger:Y},B.prototype.create=Z,Z.prototype=B.prototype,B.Event=function(t,e){e?(this.type=t,this.defaultPrevented=!1,this.propagationStopped=!0,this.timeStamp=(new Date).getTime(),this.currentTarget=e,this.target=e,this.srcElement=e,this.isArtificial=!0):(this.originalEvent=t,this.type=t.type,this.defaultPrevented=t.defaultPrevented,this.propagationStopped=!1,this.timeStamp=t.timeStamp,this.currentTarget=t.currentTarget,this.target=t.target,this.srcElement=t.srcElement,this.isArtificial=!1)},B.Event.prototype={preventDefault:te,stopPropagation:ee},B.extend=_,["on","onAll","off","offAll","once","onceAll","trigger"].forEach(function(t){B[t]=function(){var e=S(arguments[0]),n=a.call(arguments,1);B.prototype[t].apply(e,n)}}),B});