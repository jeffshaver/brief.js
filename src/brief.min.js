/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=global.document?e():function(){throw new Error("brief requires a document to run")}:t.brief=e()}(this,function(t,e,n){"use strict";var r,i=[],o=n.prototype,s=e.prototype,l=o.slice,c=o.splice,f=o.push,a=o.pop,h=o.filter,u=s.matchesSelector||s.msMatchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector,p=/^#[\w\d]*$/,g=/^\.[\w\d]*$/,y=/^[\w\d]*$/,d=function(t,e){return u.call(t,e)},m=function(t){return"string"==typeof t?t.split(" "):l.call(t,0)},v=function(t){var e=w();return"string"==typeof t&&(t=w(t)),!t.isBrief&&t.length?f.apply(e,t):e.push(t),e},b=function(t,e,n,r){var o=e,s=this;return!n&&r&&(o=function(n){s.off(t,o,!1),e.call(this,n)}),n&&(o=i[e.__briefId]||function(t){d(t.srcElement,n)&&(r&&s.off(type,e,n),e.call(this,t))}),o},_=function(){var t=v(arguments[0]),e=l.call(arguments,1);w.prototype.on.apply(t,e)},E=function(){var t=v(arguments[0]),e=l.call(arguments,1);w.prototype.off.apply(t,e)},B=function(){var t=v(arguments[0]),e=l.call(arguments,1);w.prototype.once.apply(t,e)},w=function(t,e){return new w.prototype.create(t,e)};return w.prototype={length:0,isBrief:!0,splice:function(){return c.apply(this,l.call(arguments,0)),this},push:function(){for(var t,e=l.call(arguments,0),n=0,r=e.length;r>n;n++)t=e[n],t.isBrief?f.apply(this,t.toArray()):t.length?f.apply(this,t):f.call(this,t);return this},pop:function(){return a.apply(this),this},toArray:function(){return l.call(this,0)},empty:function(){for(;this.length>0;)this.pop();return this},filter:function(t){var e,n;return"string"==typeof t&&(n=t,t=function(t){return d(t,n)}),e=h.call(this,t),e.selector=n?n:this.selector,e},indexOf:function(t){for(var e=0;e<this.length;e++)if(d(this[e],t))return e;return-1},get:function(t){return this[t]},find:function(t){for(var e=w(),n=this.length,r=0;n>r;r++)f.apply(e,l.call(this.get(r).querySelectorAll(t),0));return e.selector=this.selctor,e},getChildren:function(){for(var t=w(),e=0;e<this.length;e++)f.apply(t,this[e].children);return t},forEach:function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e,this);return this},getOffsets:function(){var t=[];return this.length&&null!=this[0]?(this.forEach(function(e){var n=e.getBoundingClientRect();t.push({top:n.top,left:n.left})}),1==t.length?t[0]:t):null},on:function(t,e,n,r){var o,s,l,c,f,a=e,h=this,u=0;for("boolean"==typeof n&&(r=n,n=void 0),t=m(t),a=b.call(this,t,e,n,r),c=t.length;c>u;u++)for(l=0,s=t[u],f=h.length;f>l;l++)o=h[l],n?(void 0===e.__briefId&&(e.__briefId=i.length,a._instances=[],a._originalCallback=e,i[e.__briefId]=a),a._instances.push({element:o,type:s,delegatedTo:n}),o.addEventListener(s,a,!0)):o.addEventListener(s,a,!1)},off:function(t,e,n){var r,o,s,l,c,f,a,h,u=this,p=0;for(t=m(t),a=t.length;a>p;p++)for(s=0,r=t[p],h=u.length;h>s;s++)if(o=u[s],n)for(c=i[e.__briefId],o.removeEventListener(r,c,!0),f=c._instances,l=f.length;l--;)f[l].element==o&&f[l].type==r&&f[l].delegatedTo==n&&c._instances.splice(l,1);else o.removeEventListener(r,e,!1)},once:function(){var t=l.call(arguments,0);return t.push(!0),w.prototype.on.apply(this,t)}},r=w.prototype.create=function(e,n){var r;return(e||n)&&(("string"==typeof n||!n&&e)&&(this.selector=n||e,r=p.test(this.selector)?[t.getElementById(this.selector.substring(1))]:g.test(this.selector)?t.getElementsByClassName(this.selector.substring(1)):y.test(this.selector)?t.getElementsByTagName(this.selector):t.querySelectorAll(this.selector),r.length&&null!=r[0]&&f.apply(this,l.call(r,0))),this.selector==n?this.find(e):n&&n.isBrief?f.apply(this,n.find(e)):"object"==typeof n&&(f.apply(this,n.length?n:[n]),this.find(e))),this},r.prototype=w.prototype,w.on=_,w.off=E,w.once=B,w}.bind(this,document,Element,Array));