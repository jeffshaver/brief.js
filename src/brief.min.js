/* brief.js | Copyright 2014 Jeffrey E. Shaver II | Released under the MIT license | https://github.com/jeffshaver/brief.js/blob/master/LICENSE */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=global.document?e():function(){throw new Error("brief requires a document to run")}:t.brief=e()}(this,function(t,e,n){"use strict";var r,o={},i=n.prototype,l=e.prototype,s=i.slice,c=i.splice,a=i.push,h=i.pop,u=i.filter,f=l.matchesSelector||l.msMatchesSelector||l.mozMatchesSelector||l.webkitMatchesSelector||l.oMatchesSelector,p=/^#[\w\d]+$/,g=/^\.[\w\d]+$/,y=/^[\w\d]+$/,d=function(t,e){return f.call(t,e)},m=function(t){return"string"==typeof t?t.split(" "):s.call(t,0)},v=function(t){var e=S();return"string"==typeof t&&(t=S(t)),!t.isBrief&&t.length?a.apply(e,t):e.push(t),e},b=function(t){var e,n,r,i,l=t.srcElement,s=o[t.type];if(l!=document)for(e=0;e<s.length;e++)n=s[e],r=n.element,i=n.delegatedTo,d(l,i)&&r.contains(l)&&n.callback.call(this,t)},E=function(){var t=v(arguments[0]),e=s.call(arguments,1);S.prototype.on.apply(t,e)},B=function(){var t=v(arguments[0]),e=s.call(arguments,1);S.prototype.off.apply(t,e)},w=function(){var t=v(arguments[0]),e=s.call(arguments,1);S.prototype.once.apply(t,e)},S=function(t,e){return new S.prototype.create(t,e)};return S.prototype={length:0,isBrief:!0,splice:function(){return c.apply(this,s.call(arguments,0)),this},push:function(){var t,e,n=s.call(arguments,0);for(e=0;e<n.length;e++)t=n[e],t.isBrief?a.apply(this,t.toArray()):t.length?a.apply(this,t):a.call(this,t);return this},pop:function(){return h.apply(this),this},toArray:function(){return s.call(this,0)},empty:function(){for(;this.length>0;)this.pop();return this},filter:function(t){var e,n;return"string"==typeof t&&(n=t,t=function(t){return d(t,n)}),e=u.call(this,t),e.selector=n?n:this.selector,e},indexOf:function(t){var e;for(e=0;e<this.length;e++)if(d(this[e],t))return e;return-1},get:function(t){return this[t]},find:function(t){var e,n=S();for(e=0;e<this.length;e++)a.apply(n,s.call(this.get(e).querySelectorAll(t),0));return n.selector=this.selctor,n},getChildren:function(){var t,e=S();for(t=0;t<this.length;t++)a.apply(e,this[t].children);return e},forEach:function(t){var e;for(e=0;e<this.length;e++)t(this[e],e,this);return this},getOffsets:function(){var t=[];return this.length&&null!=this[0]?(this.forEach(function(e){var n=e.getBoundingClientRect();t.push({top:n.top,left:n.left})}),1==t.length?t[0]:t):null},on:function(t,e,n,r){var i,l,s,c,a=e,h=this;for("boolean"==typeof n&&(r=n,n=void 0),t=m(t),!n&&r&&(a=function(n){h.off(t,a,!1),e.call(this,n)}),s=0;s<t.length;s++)for(l=t[s],c=0;c<h.length;c++)i=h[c],n?(o[l]||(o[l]=[],document.addEventListener(l,b,!0)),o[l].push({element:i,delegatedTo:n,callback:e})):i.addEventListener(l,a,!1)},off:function(t,e,n){var r,i,l,s,c,a,h,u=this;for(t=m(t),a=0;a<t.length;a++)for(h=0,r=t[a],h=0;h<u.length;h++)if(i=u[h],n){for(s=o[r],l=s.length;l--;)c=s[l],c.element==i&&c.delegatedTo==n&&c.callback==e&&s.splice(l,1);s.length||document.removeEventListener(r,b,!0)}else i.removeEventListener(r,e,!1)},once:function(){var t=s.call(arguments,0);return t.push(!0),S.prototype.on.apply(this,t)}},r=S.prototype.create=function(e,n){var r;return(e||n)&&(("string"==typeof n||!n&&e)&&(this.selector=n||e,r=p.test(this.selector)?[t.getElementById(this.selector.substring(1))]:g.test(this.selector)?t.getElementsByClassName(this.selector.substring(1)):y.test(this.selector)?t.getElementsByTagName(this.selector):t.querySelectorAll(this.selector),r.length&&null!=r[0]&&a.apply(this,s.call(r,0))),this.selector==n?this.find(e):n&&n.isBrief?a.apply(this,n.find(e)):"object"==typeof n&&(a.apply(this,n.length?n:[n]),this.find(e))),this},r.prototype=S.prototype,S.on=E,S.off=B,S.once=w,S}.bind(this,document,Element,Array));